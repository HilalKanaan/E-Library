/* ===== THEME TOKENS ===== */
:root{
  --bg:#eef2f7;
  --panel:#ffffff;
  --text:#1b2330;
  --muted:#6b7480;

  --ink-weak:#e8eef7;
  --ink-mid:#dfe6f2;

  --brand:#5b84ff;
  --brand-ink:#2c5df0;
  --brand-weak:#eaf0ff;

  --danger:#ff5b6b;
  --ok:#27ae60;

  --radius:14px;
  --shadow:0 10px 24px rgba(20,30,55,.10);
}

/* ===== RESET / BASE ===== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}
a{color:var(--brand-ink); text-decoration:none}
a:hover{text-decoration:underline}
small{color:var(--muted)}

/* ===== LAYOUT ===== */
.container{max-width:1100px; margin:0 auto; padding:0 16px 24px}
.nav{
  position:sticky; top:0; z-index:20; backdrop-filter:saturate(1.2) blur(6px);
  background:linear-gradient(to bottom, rgba(255,255,255,.7), rgba(255,255,255,.35));
  display:flex; justify-content:space-between; align-items:center; padding:16px 24px;
  border-bottom:1px solid var(--ink-weak);
}
.nav-left,.nav-right{display:flex; align-items:center; gap:12px}
.brand{font-weight:800}
.navlink{
  padding:10px 14px; border-radius:12px; opacity:.9; text-decoration:none;
}
.navlink:hover{opacity:1; background:#f2f5fb}
.navlink.active{background:var(--panel); box-shadow:var(--shadow)}

/* ===== CARDS / PANELS ===== */
.card{
  background:var(--panel);
  border:1px solid rgba(0,0,0,.03);
  border-radius:16px;
  box-shadow:var(--shadow);
  padding:16px;
  margin:16px 0;
}
.card h2{margin:0 0 12px; letter-spacing:.2px}

/* ===== FORMS ===== */
.row{display:flex; flex-wrap:wrap; gap:12px}
input, select, textarea{
  background:#fff; color:var(--text);
  border:1px solid var(--ink-weak); border-radius:12px;
  padding:10px 12px; outline:none; min-width:200px;
}
input:focus, select:focus, textarea:focus{
  border-color:var(--brand); box-shadow:0 0 0 3px rgba(91,132,255,.15);
}

/* Buttons */
button{cursor:pointer}
.button{
  background:var(--brand); color:#fff; border:none;
  padding:9px 14px; border-radius:12px; font-weight:600;
  box-shadow:0 6px 14px rgba(91,132,255,.25);
  transition:transform .06s ease, box-shadow .15s ease, background .15s ease;
}
.button:hover{transform:translateY(-1px)}
.button.secondary{background:#e9eef8; color:var(--text); box-shadow:none}
.button.secondary:hover{background:#e3e8f5}
.button.danger{background:var(--danger)}

/* Pills / Chips */
.chip{padding:8px 14px; border-radius:999px; background:#f0f3f8; border:1px solid #e7ebf3}
.chip-active{background:#e3e9f5; border-color:#dfe7f5}

/* ===== TABLES ===== */
.table{width:100%; border-collapse:collapse; table-layout:fixed}
.table th,.table td{padding:14px 16px; border-bottom:1px solid var(--ink-weak); vertical-align:middle}
.table thead th{border-bottom:1px solid var(--ink-mid); text-align:left; font-weight:600}
.table tbody tr:hover{background:#f7f9fd}
.table tbody tr:last-child td{border-bottom:none}
.actions{display:flex; gap:8px; justify-content:flex-end}

/* ===== BADGES ===== */
.badge{
  display:inline-flex; align-items:center; gap:6px;
  background:linear-gradient(to bottom, #eff4ff, #e4ecff);
  border:1px solid #d7e1ff; color:var(--text);
  padding:2px 10px; border-radius:999px; font-size:12px;
}
.badge.ok{background:#eaf7ef; border-color:#cfeedd}
.badge.warn{background:#fff2ea; border-color:#ffd9c9}

/* ===== HOME GRID ===== */
.layout{
  display:grid; grid-template-columns:220px 1fr 320px; gap:20px;
  padding:24px; max-width:1280px; margin:0 auto; min-height:calc(100vh - 70px);
}
.side .brand{display:none}
.topbar{display:flex; align-items:center; gap:12px; margin-bottom:14px}
.topbar input{flex:1; padding:12px 14px; border:none; border-radius:12px; background:#fff; box-shadow:var(--shadow)}
.avatar{width:36px; height:36px; border-radius:50%; background:#d7deea; box-shadow:var(--shadow)}
.tabs{display:flex; gap:10px; margin:8px 0 18px}
.panel{background:var(--panel); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px}
.grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:16px}
.card.book{overflow:hidden; display:flex; flex-direction:column}
.cover{aspect-ratio:3/4; background:#e7ecf5 center/cover no-repeat}
.meta{padding:10px 12px}
.title{font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.author{color:var(--muted); font-size:13px; margin-top:2px}
.sub{color:var(--muted); font-size:12px; margin-top:6px}

/* Responsive collapse */
@media (max-width:1200px){ .layout{grid-template-columns:200px 1fr} .rail{display:none} }
@media (max-width:900px){ .layout{grid-template-columns:1fr} .side{display:none} .container{padding:0 12px 24px} }

/* ===== UTIL ===== */
.ml-2{margin-left:8px}
.flash-msg{min-height:1.25rem; margin-bottom:12px}
.center{display:grid; place-items:center}

/* Author hero */
.author-hero{
  padding: 18px;
  background: linear-gradient(135deg, rgba(234,241,255,.85), rgba(255,255,255,.9));
  border: 1px solid var(--ink-weak);
}
.author-hero .hero-top{ display:flex; justify-content:space-between; align-items:center; }
.author-hero .hero-main{
  display:grid; grid-template-columns: 72px 1fr auto; gap:16px; align-items:center; margin-top:10px;
}
.hero-avatar{
  width:72px; height:72px; border-radius:50%;
  display:grid; place-items:center;
  font-weight:800; font-size:28px;
  color:#2c4aa5; background: radial-gradient(100% 100% at 50% 0%, #eaf1ff, #d9e6ff);
  box-shadow: var(--shadow);
}
.hero-name{ margin:0; letter-spacing:.2px; }
.hero-stats{ display:flex; gap:8px; margin-top:6px; flex-wrap:wrap; }
.hero-actions{ display:flex; gap:8px; align-items:center; }

.hero-controls{
  display:flex; gap:12px; align-items:center; justify-content:space-between; margin-top:12px;
}
.hero-controls .tabs{ display:flex; gap:10px; }
.hero-controls .hero-search{ flex:1; display:flex; justify-content:flex-end; }
.hero-controls .hero-search input{
  min-width: 260px;
  background:#fff; border:1px solid var(--ink-weak); border-radius:12px; padding:10px 12px;
}

/* Skeletons */
.skeleton .cover{ background: #e8eef7; }
.skeleton-line{
  height: 10px; border-radius: 10px; background: linear-gradient(90deg,#e9eef6,#f2f6fb,#e9eef6);
  background-size: 200% 100%; animation: sk 1.2s infinite linear;
}
@keyframes sk{ 0%{background-position:0% 0} 100%{background-position:200% 0} }

/* ===== Notifications UI ===== */
.notif-box { position: relative; }
.bell {
  position: relative;
  background: transparent;
  border: none;
  padding: 8px;
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.bell:hover { background: #f2f5fb; }
.bell-badge{
  position:absolute; top:2px; right:2px;
  min-width:16px; height:16px; padding:0 4px;
  background:#ef5350; color:#fff; border-radius:999px;
  font-size:11px; line-height:16px; display:inline-block; text-align:center;
  box-shadow:0 0 0 2px #fff;
}

.notif-menu{
  position:absolute; right:0; top:calc(100% + 10px);
  width:360px; max-height:70vh; overflow:auto;
  background:var(--panel); border:1px solid var(--ink-weak);
  border-radius:14px; box-shadow:var(--shadow); z-index:60;
}
.notif-head{
  display:flex; justify-content:space-between; align-items:center;
  padding:10px 12px; border-bottom:1px solid var(--ink-weak);
}
.notif-list{ padding:6px 0; }
.notif-empty{ padding:16px; text-align:center; }

.notif-item{
  display:grid; grid-template-columns: 1fr auto;
  gap:10px; padding:10px 12px; border-bottom:1px solid var(--ink-weak);
}
.notif-item:last-child{ border-bottom:none; }
.notif-item.unread{ background: #f7faff; }
.ni-main .ni-title{ font-weight:600; margin-bottom:2px; }
.ni-main .ni-body{ color:var(--muted); font-size:13px; }
.ni-aside{ display:flex; flex-direction:column; align-items:flex-end; gap:6px; }
.ni-time{ color:var(--muted); }
.ni-actions .button{ padding:6px 10px; }

/* Author typeahead dropdown */
.dropdown{
  position:absolute; top:100%; left:0; right:0; z-index:50;
  background:var(--panel); border:1px solid var(--ink-weak);
  border-radius:12px; box-shadow:var(--shadow); margin-top:6px; overflow:hidden;
}
.dropdown-item{
  padding:10px 12px; cursor:pointer; border-bottom:1px solid var(--ink-weak);
}
.dropdown-item:last-child{ border-bottom:none; }
.dropdown-item:hover{ background:#f7f9fd; }
.dropdown-footer{ padding:10px 12px; display:flex; justify-content:flex-end; }

/* Admin sub-nav tabs */
.admin-tabs { display:flex; gap:10px; margin:6px 0 10px 0; }
.admin-tabs .tab {
  padding:8px 14px; border-radius:12px; border:1px solid var(--ink-weak);
  text-decoration:none; color:inherit; background:var(--panel);
}
.admin-tabs .tab.active { background:#e9f0ff; border-color:#c9d6ff; }

/* Avatars in Admin Authors */
.avatar, .avatar.sm {
  width:56px; height:56px; border-radius:50%;
  background:#e6ecf7 center/cover no-repeat; display:flex; align-items:center; justify-content:center;
  font-weight:700; color:#58627a;
}
.avatar.sm { width:34px; height:34px; font-size:14px; }
.avatar-preview { display:flex; align-items:center; margin-right:8px; }
.row-center { display:flex; align-items:center; }
.list-head { display:flex; justify-content:flex-end; margin-bottom:8px; }

/* Admin sub-tabs */
.admin-tabs { display:flex; gap:10px; margin:6px 0 14px; }
.admin-tabs .tab {
  padding:8px 14px; border-radius:12px; border:1px solid var(--ink-weak);
  text-decoration:none; color:inherit; background:var(--panel);
}
.admin-tabs .tab.active { background:#e9f0ff; border-color:#c9d6ff; }

/* Avatars */
.avatar, .avatar.sm {
  border-radius:50%; background:#e6ecf7 center/cover no-repeat;
  display:flex; align-items:center; justify-content:center;
  font-weight:700; color:#58627a;
}
.avatar { width:56px; height:56px; }
.avatar.sm { width:34px; height:34px; font-size:14px; }

.list-head { display:flex; justify-content:flex-end; margin-bottom:8px; }

/* show photos via background-image, else letter fallback */
.hero-avatar,
.avatar.photo,
.avatar.sm.photo {
  background-size: cover;
  background-position: center;
}

.hero-avatar { 
  width: 72px; height: 72px; border-radius: 50%;
  background: #e6ecf7; color: #58627a; font-weight: 700;
  display:flex; align-items:center; justify-content:center; font-size: 28px;
}

/* Profile page */
.avatar.xl { width:72px; height:72px; border-radius:50%;
  background:#e6ecf7; color:#58627a; font-weight:700; font-size:28px;
  display:flex; align-items:center; justify-content:center;
}

.stats-grid{
  display:grid; grid-template-columns: repeat(4, minmax(0,1fr));
  gap:14px; margin:14px 0 18px;
}
.card.stat{ display:flex; align-items:center; gap:12px; }
.stat-icon{ font-size:22px; }
.stat-value{ font-weight:700; font-size:20px; }
.stat-label{ color:#6b7280; font-size:12px; }

.badges{
  display:grid; grid-template-columns: repeat(4, minmax(0,1fr));
  gap:12px;
}
.badge-tile{ border:1px solid var(--ink-weak); border-radius:12px; padding:12px;
  background:var(--panel); position:relative;
}
.badge-tile.on{ box-shadow: 0 0 0 2px #cde1ff inset; }
.bt-title{ font-weight:700; }
.bt-desc{ font-size:12px; color:#6b7280; margin-top:4px; }
.bt-lock{ position:absolute; top:10px; right:10px; font-size:11px; color:#9aa3b2; }
@media (max-width: 900px){
  .stats-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
  .badges { grid-template-columns: repeat(2, minmax(0,1fr)); }
}
